{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}

<!-- Header -->
<div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
    <div class="container-fluid">
    <!-- 
        8개 과목 Paginator 생성 (X)
    -->
        <div class="header-body">
        <!-- Card stats -->
        <div class="row">

        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body">
                <div class="row">
                    <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Python Dev</h5>
                    <span class="h2 font-weight-bold mb-0">%</span>
                    </div>
                    <div class="col-auto">
                    <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                    <span class="text-nowrap">Since last month</span>
                </p>
                </div>
            </div>
            </div>

        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body">
                <div class="row">
                    <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Artificial Inteligence(AI) Dev </h5>
                    <span class="h2 font-weight-bold mb-0">%</span>
                    </div>
                    <div class="col-auto">
                    <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                    <span class="text-nowrap">Since last week</span>
                </p>
                </div>
            </div>
            </div>

        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body">
                <div class="row">
                    <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Computer License</h5>
                    <span class="h2 font-weight-bold mb-0">%</span>
                    </div>
                    <div class="col-auto">
                    <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                        <i class="fas fa-users"></i>
                    </div>
                    </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                    <span class="text-nowrap">Since yesterday</span>
                </p>
                </div>
            </div>
            </div>

        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body">
                <div class="row">
                    <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Blog(tistory)</h5>
                    <span class="h2 font-weight-bold mb-0">%</span>
                    </div>
                    <div class="col-auto">
                    <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                        <i class="fas fa-percent"></i>
                    </div>
                    </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                    <span class="text-nowrap">Since last month</span>
                </p>
                </div>
            </div>
            </div>

        {% for sub in subject_post %}
        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body">
                <div class="row">
                    <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0"> {{ sub.title }} </h5>
                    <span class="h2 font-weight-bold mb-0"> {{ sub.processed }}% </span>
                    </div>
                    <div class="col-auto">
                    <div class="icon icon-shape bg-success text-white rounded-circle shadow">
                        <i class="fas fa-book"></i>
                    </div>
                    </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> {{ sub.processed }}% </span>
                    <span class="text-nowrap">Since {{ sub.last_study }} </span>
                </p>
                </div>
            </div>
            </div>
        {% endfor %}

        <script>
        function onclicked(){
            document.getElementById('modal-button').click();
        }
        </script>

        <!-- One Card -->
            <div class="col-xl-3 col-lg-6 plan_card">
            <div class="card card-stats mb-4 mb-xl-0 plan_card_content">
                <div class="card-body" style="height:100%" onclick="onclicked()">
                    <div class="card pt-3 pb-3 mb-1 bg-gradient-gray" style="rgba(220,220,220,0.2)">
                        <div class="icon icon-shape bg-gray text-white rounded-circle shadow mx-auto"
                            style="display:block">
                            <i class="ni ni-fat-add" style="font-size:1.5rem"> </i>
                        </div>
                        <p class="text-center text-white text-sm">
                            Create Subjects & Portfolio
                        </p>
                    </div>
                </div>
            </div>
            </div>

        </div>
        </div>
    </div>
</div>

<!-- Page content -->
<div class="container-fluid mt--7">
    <!-- Table -->
    <div class="row">
        <div class="col">
            <div class="card shadow">
            <div class="row">
                <div class="col-md-10"> 
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card-header bg-transparent">
                                <h3 class="mb-0"> 공부 기록/자료 추가하기 </h3>
                                <h6 class="heading-small text-muted mb-4">Add to Study record/reference</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                </div>
            </div>

            <div class="card-body">
                <div class="pl-lg-4 mb-3">
                    <div class="col-md-4">
                            <button type="button" id="modal-button" style="display:none" class="" data-toggle="modal" data-target="#modal-form">Form</button>
                            <div class="modal fade" id="modal-form" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true" style="display: none;">
                                <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
                                    <div class="modal-content">
                                        <div class="modal-body p-0">
                                        <div class="card bg-secondary shadow border-0">
                                            <div class="card-header bg-transparent pb-5">
                                                <div class="text-muted text-center mt-2 mb-3"><small>과목, 포트폴리오 추가하기</small></div>
                                                <hr>
                                                <div class="btn-wrapper text-center mb-3">
                                                    <a href="{% url 'profile' %'}" class="btn btn-neutral btn-icon">
                                                        <span class="btn-inner--icon"><i class="ni ni-circle-08"></i></span>
                                                        <span class="btn-inner--text">{{ user.username }}</span>
                                                    </a>
                                                </div>

                                                <form role="form" action="{% url 'sub_create' %}" method="POST">
                                                {% csrf_token %}
                                                    <div class="form-group mb-3 focused">
                                                        <div class="input-group input-group-alternative">
                                                            <input class="form-control" placeholder="titles" type="text" name="title">
                                                        </div>
                                                    </div>
                                                    <div class="form-group mb-3 focused">
                                                        <div class="input-group input-group-alternative">
                                                            <input class="form-control" placeholder="sub-title" type="text" name="sub">
                                                        </div>
                                                    </div>
                                                    <div class="form-group focused">
                                                        <div class="input-group input-group-alternative">
                                                            <input class="form-control" placeholder="Description" type="text" style="height:150px" name="desc">
                                                        </div>
                                                    </div>

                                                    <div class="form-group focused">
                                                        <div class="input-group input-group-alternative">
                                                            <div class="form-group w-100">
                                                                <select class="form-control" id="exampleFormControlSelect1" name="category" placeholder="category">
                                                                    <option value=1>Study</option>
                                                                    <option value=2>Develop</option>
                                                                    <option value=3>Blog</option>
                                                                    <option value=4>Receive License</option>
                                                                    <option value=5>Workout</option>
                                                                    <option value=6>Activity</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="text-center">
                                                        <button type="submit" class="btn btn-primary my-4">생성 하기</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>                                        
                                    </div>      
                                </div>
                            </div>
                        </div>
                        </div>
                </div>
                
                <form method="GET" action="{% url 'post_create' %}">
                <div class="pl-lg-4">
                    <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                        <label class="form-control-label" for="input-address">제목</label>
                        <input name="p_title" id="" class="form-control form-control-alternative" placeholder="" value="" type="text">
                        </div>
                    </div>
                    </div>
                    <hr class="my-4" />
                    <div class="row">
                    <div class="col-lg-4">
                        <div class="form-group">
                        <label class="form-control-label" for="input-city">링크1</label>
                        <input name="link1" type="text" id="input-city" class="form-control form-control-alternative" placeholder="https://example.com" value="">
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="form-group">
                        <label class="form-control-label" for="input-country">링크2</label>
                        <input name="link2" type="text" id="input-country" class="form-control form-control-alternative" placeholder="https://example.com" value="">
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <label class="form-control-label" for="input-country"> 카테고리 </label>
                        <br>
                        <div class="form-group">
                            <select class="form-control" id="exampleFormControlSelect1" name="category">
                            {% for sub in subject %}
                                <option value="{{ sub.post_obj_id }}"> {{ sub.post_obj_id }} </option>
                            {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <label class="form-control-label" for="input-country"> 태그 </label>
                        <div class="input-group-prepend" style="width:90%">
                            <input name="tag" type="text" id="input-city" class="form-control form-control-alternative" placeholder="# tag" value="">
                        </div>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group">
                        <label class="form-control-label" for="input-country">첨부 파일</label>
                        <input name="file" type="file" id="input-file" class="form-control-file">
                        </div>
                    </div>
                    </div>
                </div>
                <!-- <hr class="my-4" /> -->
                <h6 class="heading-small text-muted mb-4"> </h6>
                <div class="pl-lg-4">
                    <div class="form-group">
                    {% if request.user.is_authenticated %}
                    <textarea rows="16" name="contents" class="form-control form-control-alternative" placeholder=""></textarea>
                    {% else %}
                    <textarea rows="16" name="contents" class="form-control form-control-alternative" placeholder="" readonly> 로그인을 해야 작성할 수 있어요!!  </textarea>
                    {% endif %}
                    </div>
                </div>
                <hr class="my-4" />
                <!-- Description -->

                {% if request.user.is_authenticated %}
                <button class="btn btn-icon btn-2 btn-success"  type="submit">
                    작성하기
                    {% comment %} <span class="btn-inner--icon"><i class="ni ni-atom"></i></span> {% endcomment %}
                </button>
                <button class="btn btn-icon btn-2 btn-warning" type="button">
                    임시저장
                    {% comment %} <span class="btn-inner--icon"><i class="ni ni-atom"></i></span> {% endcomment %}
                </button>
                {% endif %}
                </form>
            </div>
            </div>
        </div>
    </div>
    {% endblock %}
</div>
