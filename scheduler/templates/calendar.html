<!doctype html>
{% load staticfiles %}
<html>
  <head>

    <meta charset="utf-8">

    <script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{% static 'css/calendar.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  </head>
  <body>

    <div class="container-fluid" id="Scalendar">
      <div class="container">

        <div class="calender_adjust_box">
          <div class="prevMonth">
            <i class="material-icons" id="schedule_left">keyboard_arrow_left</i>
          </div>

          <div class="nextMonth">
            <i class="material-icons" id="schedule_right">keyboard_arrow_right</i>
          </div>
        </div>

        <div class="weather">
        </div>

        <div class="cTime">
          <h4> 00 : 00 </h4>
        </div>

          <div id="calendar-wrap">
              <header>
                   <h1 class="calendarTitle"> 2019 - 10 </h1>
              </header>

              <div id="calendar">
                <ul class="weekdays">
                    <li>일요일</li>
                    <li>월요일</li>
                    <li>화요일</li>
                    <li>수요일</li>
                    <li>목요일</li>
                    <li>금요일</li>
                    <li>토요일</li>
                </ul>

                <!-- Days from previous month -->

                <ul class="days">
                    <li class="day" id="day_1">
                        <div class="date">1</div>
                    </li>
                    <li class="day" id="day_2">
                        <div class="date">2</div>
                    </li>
                    <li class="day" id="day_3">
                        <div class="date">3</div>
                    </li>
                    <li class="day" id="day_4">
                        <div class="date">4</div>
                    </li>
                    <li class="day" id="day_5">
                        <div class="date">5</div>
                    </li>
                    <li class="day" id="day_6">
                        <div class="date">6</div>
                    </li>
                    <li class="day" id="day_7">
                        <div class="date">7</div>
                    </li>
                </ul>

                <!-- Row #2 -->

                <ul class="days">
                    <li class="day" id="day_8">
                        <div class="date">8</div>
                    </li>
                    <li class="day" id="day_9">
                        <div class="date">9</div>
                    </li>
                    <li class="day" id="day_10">
                        <div class="date">10</div>
                    </li>
                    <li class="day" id="day_11">
                        <div class="date">11</div>
                    </li>
                    <li class="day" id="day_12">
                        <div class="date">12</div>
                    </li>
                    <li class="day" id="day_13">
                        <div class="date">13</div>
                    </li>
                    <li class="day" id="day_14">
                        <div class="date">14</div>
                    </li>
                </ul>

                <!-- Row #3 -->

                <ul class="days">
                    <li class="day" id="day_15">
                        <div class="date">15</div>
                    </li>
                    <li class="day" id="day_16">
                        <div class="date">16</div>
                    </li>
                    <li class="day" id="day_17">
                        <div class="date">17</div>
                    </li>
                    <li class="day" id="day_18">
                        <div class="date">18</div>
                    </li>
                    <li class="day" id="day_19">
                        <div class="date">19</div>
                    </li>
                    <li class="day" id="day_20">
                        <div class="date">20</div>
                    </li>
                    <li class="day" id="day_21">
                        <div class="date">21</div>
                    </li>
                </ul>

                <!-- Row #4 -->

                <ul class="days">
                    <li class="day" id="day_22">
                        <div class="date">22</div>
                    </li>
                    <li class="day" id="day_23">
                        <div class="date">23</div>
                    </li>
                    <li class="day" id="day_24">
                        <div class="date">24</div>
                    </li>
                    <li class="day" id="day_25">
                        <div class="date">25</div>
                    </li>
                    <li class="day" id="day_26">
                        <div class="date">26</div>
                    </li>
                    <li class="day" id="day_27">
                        <div class="date">27</div>
                    </li>
                    <li class="day" id="day_28">
                        <div class="date">28</div>
                    </li>
                </ul>

                <!-- Row #5 -->

                <ul class="days">
                    <li class="day" id="day_29">
                        <div class="date">29</div>
                    </li>
                    <li class="day" id="day_30">
                        <div class="date">30</div>
                    </li>
                    <li class="day" id="day_31">
                        <div class="date">31</div>
                    </li>
                    <li class="day" id="day_32">
                        <div class="date">1</div>
                    </li>
                    <li class="day" id="day_33">
                        <div class="date">2</div>
                    </li>
                    <li class="day" id="day_34">
                        <div class="date">3</div>
                    </li>
                    <li class="day" id="day_35">
                        <div class="date">4</div>
                    </li>
                </ul>

                <!-- Row #6 -->

                <ul class="days">
                    <li class="day"  id="day_36">
                        <div class="date">5</div>
                    </li>
                    <li class="day" id="day_37">
                        <div class="date">1</div> <!-- Next Month -->
                    </li>
                    <li class="day" id="day_38">
                        <div class="date">6</div>
                    </li>
                    <li class="day" id="day_39">
                        <div class="date">7</div>
                    </li>
                    <li class="day" id="day_40">
                        <div class="date">8</div>
                    </li>
                    <li class="day" id="day_41">
                        <div class="date">9</div>
                    </li>
                    <li class="day" id="day_42">
                        <div class="date">10</div>
                    </li>
                </ul>
            </div>
        </div>
      </div>

      <div id="subCalendar">
        <div id="addSchedule">
          <h4 class="text-center">달력에 일정 추가하기 </h4>
          <p class="text-center"> (Add schedule in calendar) </p>

          <form class="form-group formSchedule" action="{% url 'add_schedule' %}" method="POST" style="margin-left:5%;">
            {% csrf_token %}
            <span class="text-left">일정 제목(Schedule Title):</span>
            <span class="text-right"><input type="text" style="width: 90% !important;" class="form-control" name="schedule_title" placeholder="title"/></span>

            <br><br>

            <span class="text-left"> 일정 부가 설명(Scehdule description): </span>
            <span class="text-right"><input type="text" style="width: 90% !important;" class="form-control" name="schedule_contents" placeholder="description"/></span>

            <br><br>

            
            <script>
                $( function() {
                    $( "#dp1" ).datepicker({
                         dateFormat: 'yy-mm-dd' 
                    });

                    $( "#dp2" ).datepicker({
                         dateFormat: 'yy-mm-dd' 
                    });
                } );
            </script>

            <span class="text-left">  일정 날짜,기간 (period or date&time): </span>

            <span class="text-right">
              <input type="text" style="width: 40% !important; display: inline-block !important;" id="dp1" class="datepicker, form-control" name="start_date" placeholder="period or date"/> &nbsp ~ &nbsp
              <input type="text" style="width: 40% !important; display: inline-block !important;" id="dp2" class="datepicker, form-control" name="end_date" placeholder="period or date"/>
            </span>
            
            <br><br><br>

            <span class="text-left">  일정 유형 ( category of Schedule ): </span>

            <span class="text-right">
              <select id="exam" style="width: 90% !important;" name="category" class="form-control">
                <option value="1">고려대학교 학사정보</option>
                <option value="2">개인 일정</option>
                <option value="3">공휴일, 휴강일</option>
              </select>
            </span>


            <!-- <span class="text-right"><input type="text" style="width: 90% !important;" class="form-control" name="" placeholder="category"/></span> -->

            <br>
            <br>
            <button type="submit" name="button" class="btn">제출</button>
            <span class="text-right" style="font-size:10px"> (Only saved in Browser Storage) </span>
          </form>
        </div>
        <hr>
        <div id="cMonthMemo">
          <h4 class="text-center"> 이달의 메모 </h4>
          <p class="text-center"> Memo </p>
          <form class="memoForm" style="margin-left:5%;">
            <span class="text-right"><input type="text" style="width: 90% !important;" class="form-control memoInput" name="" placeholder="write what you have to remember"/></span>
          </form>
          <br><br>
          <div class="memoList">
            <div class="panel panel-default">
              <div class="panel-heading"><h3 class="panel-title">(Title - 제목)</h3></div>
              <div class="panel-body">(Contets - 내용)</div>
            </div>
          </div>
      </div>
    </div>

    <script>
        var nowDay = new Date();
        var currentMonth = nowDay.getMonth()+1;
        //console.log('CurrentMonth', currentMonth);

        {% for sch in schedules %}
        start_day = [4, 7, 1, 4, 6, 2, 4, 7, 3, 5, 1, 3];
        var day = {{sch.start_date|date:"j"}}
        var month = {{sch.start_date|date:"n"}}

        if( month == currentMonth ){

            //var elementT = $('.day')[start_day[month-1]+day-2];

            {% if sch.category == 1%}
            var elementT = document.createElement('div');
            elementT.classList.add("event");
            console.log(elementT);
            
            var element1 = document.createElement('div');
            element1.className = "event-desc";
            element1.innerHTML = "{{ sch.title }}";
            console.log(element1);

            var element2 = document.createElement('div');
            element2.className = "event-time";
            element2.innerHTML = "{{ sch.contents }} <br> {{ sch.start_date }} ~ {{ sch.end_date }}";
            console.log(element2);

            elementT.append(element1);
			elementT.append(element2);

            elementT.classList.add("KU-schedule");
			console.log("final",elementT);

            $('.day')[start_day[month-1]+day-2].appendChild(elementT);
            
            //elementT.html("<div class='event-title'> {{sch.title}} </div>");
            //elementT.html("<div class='event-desc'> {{sch.contents}} </div>");

            /*<elementT.append("<div> {{sch.title}} </div>")
            elementT.addClass("event-title");
            elementT.append("<div> {{sch.contents}} </div>")
            elementT.addClass("event-desc");*/

            console.log("Django_final",elementT);
            
            {% elif sch.category == 2%}
            var elementT = document.createElement('div');
            elementT.classList.add("event");
            //elementT.ClassName = "MY-schedule";
            console.log(elementT);
            
            var element1 = document.createElement('div');
            element1.className = "event-desc";
            element1.innerHTML = "{{ sch.title }}";
            console.log(element1);

            var element2 = document.createElement('div');
            element2.className = "event-time";
            element2.innerHTML = "{{ sch.contents }} <br> {{ sch.start_date }} ~ {{ sch.end_date }}";
            console.log(element2);

            elementT.append(element1);
			elementT.append(element2);

            elementT.classList.add("MY-schedule");
			console.log("final",elementT);

            $('.day')[start_day[month-1]+day-2].appendChild(elementT);
            console.log("Django_final",elementT);

            {% elif sch.category == 3%}
            var elementT = document.createElement('div');
            elementT.ClassName = "event";
            console.log(elementT);
            
            var element1 = document.createElement('div');
            elementT.ClassList.add("event");
            element1.innerHTML = "{{ sch.title }}";
            console.log(element1);

            var element2 = document.createElement('div');
            element2.className = "event-time";
            element2.innerHTML = "{{ sch.contents }} <br> {{ sch.start_date }} ~ {{ sch.end_date }}";
            console.log(element2);

            elementT.append(element1);
			elementT.append(element2);
			console.log("final",elementT);

            $('.day')[start_day[month-1]+day-2].appendChild(elementT);

            console.log("Django_final",elementT);
            {% endif %}
        }

        {% endfor %}
    </script>
    
    <script src="{% static 'js/schedule.js' %}"></script>
    <script src="{% static 'js/clock.js' %}"type="text/javascript"></script>
    <script src="{% static 'js/weather.js' %}" charset="utf-8"></script>
    <script src="{% static 'js/addMemo.js' %}" charset="utf-8"></script>

  </body>

</html>
